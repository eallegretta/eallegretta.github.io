<html>
  <body>
    <a class="bookmarklet" href="javascript:(function()%7B(function%20()%20%7Bvar%20iframe%20%3D%20document.createElement('iframe')%3Biframe.style.display%20%3D%20'none'%3Bdocument.body.appendChild(iframe)%3Bwindow.console%20%3D%20iframe.contentWindow.console%3Blet%20allPlayerNames%20%3D%20%7Blegends%3A%20%7B%7D%2Cplayers%3A%20%7B%7D%7D%3Bconsthostname%20%3D%20window.services.Authentication.hostname%2CgetTeamName%20%3D%20id%20%3D%3E%20%7Breturn%20window.services.Localization.localize(%60global.teamabbr15.%24%7Bwindow.APP_YEAR%7D.team%24%7Bid%7D%60)%3B%7D%2CgetLeagueName%20%3D%20id%20%3D%3E%20%7Breturn%20window.services.Localization.localize(%60global.leagueFull.%24%7Bwindow.APP_YEAR%7D.league%24%7Bid%7D%60)%3B%7D%2CgetNationName%20%3D%20id%20%3D%3E%20%7Breturn%20window.services.Localization.localize(%60search.nationName.nation%24%7Bid%7D%60)%3B%7D%2CgetAllPlayers%20%3D%20()%20%3D%3E%20%7Blet%20allPlayers%20%3D%20%5B%5D%3Bfunction%20fetchPlayers(start%2C%20resolve)%20%7Breturn%20fetch(%60%24%7Bwindow.services.Authentication.sessionUtas.url%7D%2Fut%2Fgame%2Ffifa21%2Fclub%60%2C%20%7Bmethod%3A%20%22POST%22%2Cheaders%3A%20%7B%22X-UT-SID%22%3A%20services.Authentication.getUtasSession()%5B%22id%22%5D%2C%22Content-Type%22%3A%20%22application%2Fjson%22%2C%7D%2Cbody%3A%20JSON.stringify(%7Bcount%3A%2091%2Csort%3A%20%22desc%22%2CsortBy%3A%20%22value%22%2Cstart%3A%20start%2Ctype%3A%20%22player%22%7D)%7D).then(response%20%3D%3E%20response.json()).then(players%20%3D%3E%20%7BallPlayers%20%3D%20allPlayers.concat(players.itemData)%3Bif%20(players.itemData.length%20%3C%2091)%20%7Bresolve(allPlayers)%3B%7D%20else%20%7BfetchPlayers(start%20%2B%2091%2C%20resolve)%3B%7D%7D)%3B%7Dreturn%20new%20Promise((resolve)%20%3D%3E%20%7Bfetch('https%3A%2F%2Fwww.ea.com%2Ffifa%2Fultimate-team%2Fweb-app%2Fcontent%2F21D4F1AC-91A3-458D-A64E-895AA6D871D1%2F2021%2Ffut%2Fitems%2Fweb%2Fplayers.json%3F_%3D'%20%2B%20new%20Date().valueOf()).then(response%20%3D%3E%20response.json()).then(allPlayers%20%3D%3E%20%7Bfor(let%20legend%20of%20allPlayers.LegendPlayers)%7BallPlayerNames.lengends%5Blegend.id%5D%20%3D%20%7B%20f%3A%20legend.f%2C%20l%3A%20legend.l%2C%20r%3A%20legend.r%20%7D%3B%7Dfor(let%20player%20of%20allPlayers.Players)%7BallPlayerNames.players%5Bplayer.id%5D%20%3D%20%7B%20f%3A%20player.f%2C%20l%3A%20player.l%2C%20r%3A%20player.r%20%7D%3B%7D%7D).catch(()%20%3D%3E%20%7B%7D)%3BfetchPlayers(0%2C%20resolve)%3B%7D)%3B%7D%3BgetAllPlayers().then(players%20%3D%3E%20%7Bconst%20nations%20%3D%20%7B%7D%3Bconst%20leagues%20%3D%20%7B%7D%3Bconst%20ratings%20%3D%20%7B%7D%3Bconsole.log(players)%3Bfor%20(let%20player%20of%20players)%20%7Bif%20(!ratings%5Bplayer.rating%5D)%20%7Bratings%5Bplayer.rating%5D%20%3D%20%7B%20count%3A%201%2C%20players%3A%20%5B%20player%20%5D%20%7D%3B%7Delse%20%7Bratings%5Bplayer.rating%5D.count%2B%2B%3Bratings%5Bplayer.rating%5D.players.push(player)%3B%7Dconst%20nation%20%3D%20getNationName(player.nation)%3Bif%20(!nations%5Bnation%5D)%20%7Bnations%5Bnation%5D%20%3D%20%5B%5D%3B%7Dnations%5Bnation%5D.push(player)%3Bconst%20league%20%3D%20getLeagueName(player.leagueId)%3Bconst%20team%20%3D%20getTeamName(player.teamid)%3Bif%20(!leagues%5Bleague%5D)%20%7Bleagues%5Bleague%5D%20%3D%20%7B%20playersCount%3A%200%2C%20ratings%3A%20%7B%7D%2C%20teams%3A%20%7B%7D%20%7D%3B%7Dif%20(!leagues%5Bleague%5D.teams%5Bteam%5D)%20%7Bleagues%5Bleague%5D.teams%5Bteam%5D%20%3D%20%5B%5D%3B%7Dleagues%5Bleague%5D.playersCount%2B%2B%3Bleagues%5Bleague%5D.teams%5Bteam%5D.push(player)%3Bif%20(!leagues%5Bleague%5D.ratings%5Bplayer.rating%5D)%20%7Bleagues%5Bleague%5D.ratings%5Bplayer.rating%5D%20%3D%201%3B%7Delse%20%7Bleagues%5Bleague%5D.ratings%5Bplayer.rating%5D%2B%2B%3B%7D%7Dconsole.log(nations)%3Bconsole.log(leagues)%3Bconsole.log(ratings)%3BprepareReport(nations%2C%20leagues%2C%20ratings)%3B%7D)%3Bfunction%20prepareReport(nations%2C%20leagues%2C%20ratings)%20%7Blet%20ratingsReportHtml%20%3D%20%22%3Ctable%20class%3D'table%20table-striped'%3E%3Ccaption%3EPlayers%20by%20Rating%3Cthead%3E%3Ctr%3E%3Cth%3ERating%3C%2Fth%3E%3Cth%3ECount%3C%2Fth%3E%3Cth%3EPlayers%3C%2Fth%3E%3C%2Ftr%3E%3C%2Fthead%3E%3Ctbody%3E%22%3Bfor%20(rating%20of%20Object.keys(ratings).sort())%20%7BratingsReportHtml%20%2B%3D%20%60%3Ctr%3E%3Ctd%3E%24%7Brating%7D%3C%2Ftd%3E%3Ctd%20class%3D%22right%22%3E%24%7Bratings%5Brating%5D.count%7D%3C%2Ftd%3E%3C%2Ftr%3E%60%7DratingsReportHtml%20%2B%3D%20%22%3C%2Ftbody%3E%3C%2Ftable%3E%22%3Blet%20leaguesReportHtml%20%3D%20%22%3Ctable%20class%3D'table%20table-striped'%3E%3Ccaption%3EPlayers%20by%20League%3Cthead%3E%3Ctr%3E%3Cth%3ELeague%3C%2Fth%3E%3Cth%3ECount%3C%2Fth%3E%3C%2Ftr%3E%3C%2Fthead%3E%3Ctbody%3E%22%3Bfor%20(league%20of%20Object.keys(leagues).sort())%20%7BleaguesReportHtml%20%2B%3D%20%60%3Ctr%3E%3Ctd%3E%24%7Bleague%7D%3C%2Ftd%3E%3Ctd%3ETotal%3A%20%24%7Bleagues%5Bleague%5D.playersCount%7D%3Cul%3E%60%3Bfor(team%20of%20Object.keys(leagues%5Bleague%5D.teams).sort())%7BleaguesReportHtml%20%2B%3D%20%60%3Cli%3E%3Cb%3E%24%7Bteam%7D%3A%20%24%7Bleagues%5Bleague%5D.teams%5Bteam%5D.length%7D%3C%2Fli%3E%60%3B%7DleaguesReportHtml%20%2B%3D%20%22%3C%2Ful%3E%3C%2Ftd%3E%3C%2Ftr%3E%22%7DleaguesReportHtml%20%2B%3D%20%22%3C%2Ftbody%3E%3C%2Ftable%3E%22%3Bconst%20outputHtml%20%3D%20%60%3Chtml%3E%3Chead%3E%3Cstyle%3Ecaption%20%7B%20white-space%3A%20nowrap%20%7Dtd%20%7B%20vertical-align%3A%20top%7Dtd.right%20%7B%20text-align%3A%20right%3B%20%7D%3C%2Fstyle%3E%3C%2Fhead%3E%3Cbody%3E%24%7BratingsReportHtml%7D%24%7BleaguesReportHtml%7D%3C%2Fbody%3E%3C%2Fhtml%3E%60%3Bconst%20win%20%3D%20window.open(%22%22%2C%20%22%22%2C%20%22toolbar%3Dno%2Clocation%3Dno%2Cdirectories%3Dno%2Cstatus%3Dno%2Cmenubar%3Dno%2Cscrollbars%3Dyes%2Cresizable%3Dyes%2Cwidth%3D780%2Cheight%3D700%22)%3Bwin.document.write(outputHtml)%3B%7D%7D)()%7D)()">Club Analyzer</a>
  </body>
</html>
