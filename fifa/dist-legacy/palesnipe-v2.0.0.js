window.paletools = window.paletools || {};
window.paletools['palesnipe-2.0.0'] = "KGZ1bmN0aW9uIChidXR0b25zKSB7DQogICAgY29uc3QgVkVSU0lPTiA9ICJ2Mi4wLjAiOw0KDQogICAgYnV0dG9ucyA9ICQuZXh0ZW5kKHsNCiAgICAgICAgYmFjazogJ0RpZ2l0MScsDQogICAgICAgIGVuYWJsZURpc2FibGU6ICdDb21tYScsDQogICAgICAgIGxpc3RzOiB7DQogICAgICAgICAgICB1cDogJ0Fycm93VXAnLA0KICAgICAgICAgICAgZG93bjogJ0Fycm93RG93bicsDQogICAgICAgICAgICBwcmV2OiAnQXJyb3dMZWZ0JywNCiAgICAgICAgICAgIG5leHQ6ICdBcnJvd1JpZ2h0JywNCiAgICAgICAgfSwNCiAgICAgICAgc2VhcmNoOiB7DQogICAgICAgICAgICByZXNldEJpZDogJ0JhY2txdW90ZScsDQogICAgICAgICAgICBkZWNNaW5CaWQ6ICdBcnJvd0xlZnQnLA0KICAgICAgICAgICAgaW5jTWluQmlkOiAnQXJyb3dSaWdodCcsDQogICAgICAgICAgICBkZWNNYXhCaWQ6ICdFbmQnLA0KICAgICAgICAgICAgaW5jTWF4QmlkOiAnSG9tZScsDQogICAgICAgICAgICBkZWNNaW5CdXk6ICdEZWxldGUnLA0KICAgICAgICAgICAgaW5jTWluQnV5OiAnUGFnZURvd24nLA0KICAgICAgICAgICAgZGVjTWF4QnV5OiAnQXJyb3dEb3duJywNCiAgICAgICAgICAgIGluY01heEJ1eTogJ0Fycm93VXAnLA0KICAgICAgICAgICAgc2VhcmNoOiAnRGlnaXQyJw0KICAgICAgICB9LA0KICAgICAgICByZXN1bHRzOiB7DQogICAgICAgICAgICBiaWQ6ICdEaWdpdDQnLA0KICAgICAgICAgICAgYnV5OiAnRGlnaXQzJywNCiAgICAgICAgICAgIHRyYW5zZmVyOiAnS2V5UicsDQogICAgICAgICAgICBjbHViOiAnS2V5QycsDQogICAgICAgICAgICBwcmVzc0VudGVyOiB0cnVlLA0KICAgICAgICAgICAgYXV0b0J1eTogZmFsc2UsDQogICAgICAgICAgICBwcmV2ZW50QmFjazogZmFsc2UsDQogICAgICAgICAgICBzZWxsOiAnS2V5UScsDQogICAgICAgICAgICBkZWNCaWQ6ICdEZWxldGUnLA0KICAgICAgICAgICAgaW5jQmlkOiAnUGFnZURvd24nDQogICAgICAgIH0NCiAgICB9LCBidXR0b25zIHx8IHt9KTsNCiAgICBsZXQgcCA9IGJ1dHRvbnM7DQogICAgbGV0IGVuYWJsZWQgPSB0cnVlOw0KICAgIGxldCBiYWNrQnV0dG9uTGFzdERhdGUgPSBuZXcgRGF0ZSgpOw0KICAgIGxldCBiYWNrQnV0dG9uUHJlc3NlZE9uUmVzdWx0ID0gZmFsc2U7DQoNCiAgICAvLyByZXNldCBjb25zb2xlDQogICAgdmFyIGlmcmFtZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lmcmFtZScpOw0KICAgIGlmcmFtZS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOw0KICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoaWZyYW1lKTsNCiAgICB3aW5kb3cuY29uc29sZSA9IGlmcmFtZS5jb250ZW50V2luZG93LmNvbnNvbGU7DQoNCiAgICB3aW5kb3cuTUFYX05FV19JVEVNUyA9IE51bWJlci5NQVhfVkFMVUU7DQoNCiAgICBjb25zdA0KICAgICAgICBsID0gY29uc29sZS5sb2csDQogICAgICAgIGxvYyA9IHdpbmRvdy5zZXJ2aWNlcy5Mb2NhbGl6YXRpb24sDQogICAgICAgIEJBQ0tfQlVUVE9OX1RIUkVTSE9MRCA9IDUwMCwNCiAgICAgICAgZGlzcGF0Y2hNb3VzZUV2ZW50ID0gKCR0YXJnZXQsIGV2ZW50TmFtZSkgPT4gew0KICAgICAgICAgICAgaWYgKCR0YXJnZXQubGVuZ3RoID09IDApIHJldHVybiBmYWxzZTsNCiAgICAgICAgICAgIGNvbnN0IG1vdXNlRXZlbnQgPSBkb2N1bWVudC5jcmVhdGVFdmVudCgnTW91c2VFdmVudHMnKTsNCiAgICAgICAgICAgIG1vdXNlRXZlbnQuaW5pdEV2ZW50KGV2ZW50TmFtZSk7DQogICAgICAgICAgICAkdGFyZ2V0WzBdLmRpc3BhdGNoRXZlbnQobW91c2VFdmVudCk7DQogICAgICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICAgICAgfSwNCiAgICAgICAgbW91c2VEb3duID0gdGFyZ2V0ID0+IGRpc3BhdGNoTW91c2VFdmVudCh0YXJnZXQsICdtb3VzZWRvd24nKSwNCiAgICAgICAgbW91c2VVcCA9IHRhcmdldCA9PiBkaXNwYXRjaE1vdXNlRXZlbnQodGFyZ2V0LCAnbW91c2V1cCcpLA0KICAgICAgICBtb3VzZUNsaWNrID0gKHRhcmdldCwgZGVsYXksIGNhbGxiYWNrKSA9PiB7DQogICAgICAgICAgICBpZiAoZGVsYXkpIHsNCiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsNCiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2sobW91c2VDbGljayh0YXJnZXQpKTsNCiAgICAgICAgICAgICAgICB9LCBkZWxheSk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gbW91c2VEb3duKHRhcmdldCkgJiYgbW91c2VVcCh0YXJnZXQpOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9LA0KICAgICAgICBidXlOb3cgPSAoY2FsbGJhY2spID0+IHsNCiAgICAgICAgICAgIGlmIChtb3VzZUNsaWNrKGJ1eUJ0bigpKSkgew0KICAgICAgICAgICAgICAgIGlmIChwLnJlc3VsdHMucHJlc3NFbnRlcikgew0KICAgICAgICAgICAgICAgICAgICB0cnlQcmVzc09rQnRuKGNhbGxiYWNrKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgIH0sDQogICAgICAgIHRyeVByZXNzT2tCdG4gPSAoY2FsbGJhY2spID0+IHsNCiAgICAgICAgICAgIGlmICghbW91c2VDbGljayhlbnRlckJ0bigpKSkgew0KICAgICAgICAgICAgICAgIGlmIChjYWxsYmFjaykgew0KICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGNhbGxiYWNrKGZhbHNlKSwgMCk7DQogICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgc2V0VGltZW91dCh0cnlQcmVzc09rQnRuLCAxMCk7DQogICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgaWYgKGNhbGxiYWNrKSB7DQogICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKHRydWUpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB1cGRhdGVCb3VnaHRVSSgpOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9LA0KICAgICAgICBiYWNrID0gKCkgPT4gew0KICAgICAgICAgICAgbCgnYmFjaycpOw0KICAgICAgICAgICAgLy8gZm9yY2UgZG91YmxlIGJhY2sgd2hlbiB0aGVyZSBpcyBhIGNhcmQgb24gdGhlIGxpc3QNCiAgICAgICAgICAgIC8vIGlmIChuZXcgRGF0ZSgpIC0gYmFja0J1dHRvbkxhc3REYXRlIDwgQkFDS19CVVRUT05fVEhSRVNIT0xEKSB7DQogICAgICAgICAgICAvLyAgICAgcmV0dXJuOw0KICAgICAgICAgICAgLy8gfQ0KICAgICAgICAgICAgLy8gYmFja0J1dHRvbkxhc3REYXRlID0gbmV3IERhdGUoKTsNCiAgICAgICAgICAgIGlmICghbW91c2VDbGljayhiYWNrQnRuKCkpKSB7DQogICAgICAgICAgICAgICAgc2V0VGltZW91dChiYWNrLCAxKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfSwNCg0KICAgICAgICBzZWFyY2ggPSAoKSA9PiB7DQogICAgICAgICAgICBtb3VzZUNsaWNrKHNlYXJjaEJ0bigpKTsNCiAgICAgICAgICAgIGlmIChwLnJlc3VsdHMuYXV0b0J1eSkgew0KICAgICAgICAgICAgICAgIGlmIChzZWFyY2hSZXN1bHRzKCkgPT0gMCkgew0KICAgICAgICAgICAgICAgICAgICBsKCdyZXNlYXJjaGluZycpOw0KICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KHNlYXJjaCwgMTApOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgbCgkKCIudXQtbm8tcmVzdWx0cy12aWV3IikubGVuZ3RoKTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKCQoIi51dC1uby1yZXN1bHRzLXZpZXciKS5sZW5ndGggPiAwKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBsKCdubyByZXN1bHRzJyk7DQogICAgICAgICAgICAgICAgICAgICAgICBiYWNrKCk7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICBsKCdidXlpbmcnKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGJ1eU5vdygoYm91Z2h0KSA9PiB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGJvdWdodCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3VzZUNsaWNrKHRyYW5zZmVyQnRuKCkpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICB9LA0KDQogICAgICAgIHRyYW5zZmVyQnRuID0gKCkgPT4gJChgLnV0LWJ1dHRvbi1ncm91cCA+IGJ1dHRvbjpjb250YWlucygnJHtsb2MubG9jYWxpemUoJ2luZm9wYW5lbC5sYWJlbC5zZW5kVHJhZGVQaWxlJyl9JylgKSwNCiAgICAgICAgY2x1YkJ0biA9ICgpID0+ICQoYC51dC1idXR0b24tZ3JvdXAgPiBidXR0b246Y29udGFpbnMoJyR7bG9jLmxvY2FsaXplKCdpbmZvcGFuZWwubGFiZWwuc3RvcmVJbkNsdWInKX0nKWApLA0KICAgICAgICBzZWxsQnRuID0gKCkgPT4gJChgLnV0LWJ1dHRvbi1ncm91cCA+IGJ1dHRvbjpjb250YWlucygnJHtsb2MubG9jYWxpemUoJ2luZm9wYW5lbC5sYWJlbC5kaXNjYXJkJyl9JylgKSwNCiAgICAgICAgYnV5QnRuID0gKCkgPT4gJCgnLmJ1eUJ1dHRvbicpLA0KICAgICAgICBiYWNrQnRuID0gKCkgPT4gJCgnLnV0LW5hdmlnYXRpb24tYnV0dG9uLWNvbnRyb2wnKSwNCiAgICAgICAgZW50ZXJCdG4gPSAoKSA9PiAkKCcuZWEtZGlhbG9nLXZpZXcgLnV0LWJ1dHRvbi1ncm91cCBidXR0b246ZXEoMCknKSwNCiAgICAgICAgc2VhcmNoQnRuID0gKCkgPT4gJCgnLmJ1dHRvbi1jb250YWluZXIgLmJ0bi1zdGFuZGFyZC5jYWxsLXRvLWFjdGlvbicpLA0KICAgICAgICBzZWFyY2hSZXN1bHRzID0gKCkgPT4gJCgnLlNlYXJjaFJlc3VsdHMnKS5sZW5ndGgsDQoNCiAgICAgICAga2V5cyA9ICgpID0+IHsNCiAgICAgICAgICAgIGxldCBiID0ge307DQoNCiAgICAgICAgICAgIGJbcC5iYWNrXSA9ICgpID0+IGJhY2soKTsNCg0KICAgICAgICAgICAgaWYgKCQoJy51dC1tYXJrZXQtc2VhcmNoLWZpbHRlcnMtdmlldycpLmxlbmd0aCA+IDApIHsNCiAgICAgICAgICAgICAgICBiW3Auc2VhcmNoLmRlY01pbkJpZF0gPSAoKSA9PiBtb3VzZUNsaWNrKCQoJy5kZWNyZW1lbnQtdmFsdWUnKSk7DQogICAgICAgICAgICAgICAgYltwLnNlYXJjaC5pbmNNaW5CaWRdID0gKCkgPT4gbW91c2VDbGljaygkKCcuaW5jcmVtZW50LXZhbHVlJykpOw0KICAgICAgICAgICAgICAgIGJbcC5zZWFyY2guZGVjTWF4QmlkXSA9ICgpID0+IG1vdXNlQ2xpY2soJCgnLmRlY3JlbWVudC12YWx1ZTplcSgxKScpKTsNCiAgICAgICAgICAgICAgICBiW3Auc2VhcmNoLmluY01heEJpZF0gPSAoKSA9PiBtb3VzZUNsaWNrKCQoJy5pbmNyZW1lbnQtdmFsdWU6ZXEoMSknKSk7DQogICAgICAgICAgICAgICAgYltwLnNlYXJjaC5kZWNNaW5CdXldID0gKCkgPT4gbW91c2VDbGljaygkKCcuZGVjcmVtZW50LXZhbHVlOmVxKDIpJykpOw0KICAgICAgICAgICAgICAgIGJbcC5zZWFyY2guaW5jTWluQnV5XSA9ICgpID0+IG1vdXNlQ2xpY2soJCgnLmluY3JlbWVudC12YWx1ZTplcSgyKScpKTsNCiAgICAgICAgICAgICAgICBiW3Auc2VhcmNoLmRlY01heEJ1eV0gPSAoKSA9PiBtb3VzZUNsaWNrKCQoJy5kZWNyZW1lbnQtdmFsdWU6ZXEoMyknKSk7DQogICAgICAgICAgICAgICAgYltwLnNlYXJjaC5pbmNNYXhCdXldID0gKCkgPT4gbW91c2VDbGljaygkKCcuaW5jcmVtZW50LXZhbHVlOmVxKDMpJykpOw0KICAgICAgICAgICAgICAgIGJbcC5zZWFyY2guc2VhcmNoXSA9ICgpID0+IHNlYXJjaCgpOw0KICAgICAgICAgICAgICAgIGJbcC5zZWFyY2gucmVzZXRCaWRdID0gKCkgPT4gbW91c2VDbGljaygkKCcuc2VhcmNoLXByaWNlLWhlYWRlciA+IGJ1dHRvbjpmaXJzdCcpKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgIGxldCBpdGVtcyA9ICQoIi5saXN0RlVUSXRlbSIpOw0KICAgICAgICAgICAgICAgIGxldCBpdGVtc0V4aXN0cyA9IGl0ZW1zLmxlbmd0aCA+IDA7DQogICAgICAgICAgICAgICAgbGV0IGl0ZW1zQ29udGFpbmVyID0gaXRlbXMucGFyZW50cygnLnBhZ2luYXRlZCwgLnV0LXdhdGNoLWxpc3QtdmlldywgLnV0LXRyYW5zZmVyLWxpc3QtdmlldycpOw0KICAgICAgICAgICAgICAgIGlmIChpdGVtc0NvbnRhaW5lci5sZW5ndGggPT0gMCkgew0KICAgICAgICAgICAgICAgICAgICBpdGVtc0NvbnRhaW5lciA9IGl0ZW1zLnBhcmVudCgpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBpZiAoaXRlbXNFeGlzdHMgJiYgJCgnLkRldGFpbFBhbmVsID4gLmJpZE9wdGlvbnMnKS5sZW5ndGggPiAwKSB7DQogICAgICAgICAgICAgICAgICAgIGJbcC5yZXN1bHRzLmJpZF0gPSAoKSA9PiBtb3VzZUNsaWNrKCQoJy5iaWRCdXR0b24nKSk7DQogICAgICAgICAgICAgICAgICAgIGJbcC5yZXN1bHRzLmJ1eV0gPSAoKSA9PiBidXlOb3coKTsNCiAgICAgICAgICAgICAgICAgICAgYltwLnJlc3VsdHMuZGVjQmlkXSA9ICgpID0+IG1vdXNlQ2xpY2soJCgnLmJpZE9wdGlvbnMgLmRlY3JlbWVudC12YWx1ZScpKTsNCiAgICAgICAgICAgICAgICAgICAgYltwLnJlc3VsdHMuaW5jQmlkXSA9ICgpID0+IG1vdXNlQ2xpY2soJCgnLmJpZE9wdGlvbnMgLmluY3JlbWVudC12YWx1ZScpKTsNCiAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICBpZiAoaXRlbXNFeGlzdHMgJiYgJCgnLkRldGFpbFBhbmVsID4gLnV0LWJ1dHRvbi1ncm91cCcpLmxlbmd0aCA+IDApIHsNCiAgICAgICAgICAgICAgICAgICAgYltwLnJlc3VsdHMudHJhbnNmZXJdID0gKCkgPT4gbW91c2VDbGljayh0cmFuc2ZlckJ0bigpKTsNCiAgICAgICAgICAgICAgICAgICAgYltwLnJlc3VsdHMuY2x1Yl0gPSAoKSA9PiBtb3VzZUNsaWNrKGNsdWJCdG4oKSk7DQogICAgICAgICAgICAgICAgICAgIGJbcC5yZXN1bHRzLnNlbGxdID0gKCkgPT4gbW91c2VDbGljayhzZWxsQnRuKCkpOw0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgIGlmIChpdGVtc0V4aXN0cykgew0KICAgICAgICAgICAgICAgICAgICBiW3AubGlzdHMudXBdID0gKCkgPT4gew0KICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGNvbnRhaW5lciA9IGl0ZW1zQ29udGFpbmVyOw0KICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHNlbGVjdGVkID0gJCgnLmxpc3RGVVRJdGVtLnNlbGVjdGVkJywgY29udGFpbmVyKS5wcmV2KCk7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2VsZWN0ZWQubGVuZ3RoID09PSAwKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWQgPSAkKCIubGlzdEZVVEl0ZW06bGFzdC1jaGlsZCIsIGNvbnRhaW5lcik7DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICBtb3VzZUNsaWNrKHNlbGVjdGVkKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRhaW5lci5jc3MoJ3Bvc2l0aW9uJywgJ3JlbGF0aXZlJyk7DQogICAgICAgICAgICAgICAgICAgICAgICBjb250YWluZXIuc2Nyb2xsVG9wKGNvbnRhaW5lci5zY3JvbGxUb3AoKSArIHNlbGVjdGVkLnBvc2l0aW9uKCkudG9wIC0gc2VsZWN0ZWQuaGVpZ2h0KCkpOw0KICAgICAgICAgICAgICAgICAgICB9Ow0KICAgICAgICAgICAgICAgICAgICBiW3AubGlzdHMuZG93bl0gPSAoKSA9PiB7DQogICAgICAgICAgICAgICAgICAgICAgICBsZXQgY29udGFpbmVyID0gaXRlbXNDb250YWluZXI7DQogICAgICAgICAgICAgICAgICAgICAgICBsZXQgc2VsZWN0ZWQgPSAkKCcubGlzdEZVVEl0ZW0uc2VsZWN0ZWQnLCBjb250YWluZXIpLm5leHQoKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzZWxlY3RlZC5sZW5ndGggPT09IDApIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZCA9ICQoIi5saXN0RlVUSXRlbTpmaXJzdC1jaGlsZCIsIGNvbnRhaW5lcik7DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICBtb3VzZUNsaWNrKHNlbGVjdGVkKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRhaW5lci5jc3MoJ3Bvc2l0aW9uJywgJ3JlbGF0aXZlJyk7DQogICAgICAgICAgICAgICAgICAgICAgICBjb250YWluZXIuc2Nyb2xsVG9wKGNvbnRhaW5lci5zY3JvbGxUb3AoKSArIHNlbGVjdGVkLnBvc2l0aW9uKCkudG9wKTsNCiAgICAgICAgICAgICAgICAgICAgfTsNCiAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICBpZiAoJCgnLnBhZ2luZ0NvbnRhaW5lcicpLmxlbmd0aCA+IDApIHsNCiAgICAgICAgICAgICAgICAgICAgYltwLmxpc3RzLnByZXZdID0gKCkgPT4gbW91c2VDbGljaygkKCcucGFnaW5nQ29udGFpbmVyIC5wcmV2OnZpc2libGUnKSk7DQogICAgICAgICAgICAgICAgICAgIGJbcC5saXN0cy5uZXh0XSA9ICgpID0+IG1vdXNlQ2xpY2soJCgnLnBhZ2luZ0NvbnRhaW5lciAubmV4dDp2aXNpYmxlJykpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgcmV0dXJuIGI7DQogICAgICAgIH07DQoNCiAgICAvLyBVSSB1cGRhdGUgYWZ0ZXIgYnV5IG5vdw0KICAgIHVwZGF0ZUJvdWdodFVJID0gKCkgPT4gew0KICAgICAgICB2YXIgdHhCdG4gPSB0cmFuc2ZlckJ0bigpOw0KICAgICAgICBpZiAodHhCdG4ubGVuZ3RoID09IDApIHsNCiAgICAgICAgICAgIHNldFRpbWVvdXQodXBkYXRlQm91Z2h0VUksIDUwKTsNCiAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgfQ0KDQogICAgICAgIGxldCB1cGQgPSAodCwgdHgpID0+IHsNCiAgICAgICAgICAgIGlmICghdCkgcmV0dXJuOw0KICAgICAgICAgICAgbGV0IGFkZCA9IGAgWyAke3AucmVzdWx0c1t0eF19IF1gOw0KICAgICAgICAgICAgbGV0IGh0bWwgPSB0Lmh0bWwoKTsNCiAgICAgICAgICAgIGlmIChodG1sICYmIGh0bWwuaW5kZXhPZihhZGQpID09IC0xKSB7DQogICAgICAgICAgICAgICAgdC5odG1sKHQuaHRtbCgpICsgYWRkKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KDQogICAgICAgIHVwZCh0eEJ0biwgJ3RyYW5zZmVyJyk7DQogICAgICAgIHVwZChjbHViQnRuKCksICdjbHViJyk7DQogICAgICAgIHVwZChzZWxsQnRuKCksICdzZWxsJyk7DQogICAgfTsNCg0KICAgIGFkZENzcyA9ICgpID0+IHsNCiAgICAgICAgbGV0IGJ0biA9IChxLCBrMSwgazIsIGluYykgPT4gYCR7cX0gLiR7KGluYyA/ICdpbicgOiAnZGUnKX1jcmVtZW50LXZhbHVlOmFmdGVyIHsgZm9udC1zaXplOjEwcHg7IGRpc3BsYXk6YmxvY2s7IG1hcmdpbi10b3A6LTMwcHg7IGNvbnRlbnQ6ICdbICR7cFtrMV1bazJdfSBdJyB9YDsNCiAgICAgICAgbGV0IHNwMSA9IChpLCBrLCBpbmMpID0+IGJ0bihgLnNlYXJjaC1wcmljZXMgLnByaWNlLWZpbHRlcjpudGgtY2hpbGQoJHtpfSlgLCAnc2VhcmNoJywgaywgaW5jKTsNCiAgICAgICAgbGV0IHNwMiA9IChpLCBrMSwgazIpID0+IGAke3NwMShpLCBrMSl9JHtzcDEoaSwgazIsIHRydWUpfWA7DQogICAgICAgIGxldCBjc3MgPSBgDQogICAgICAgICAgICAke3NwMigyLCAnZGVjTWluQmlkJywgJ2luY01pbkJpZCcpfQ0KICAgICAgICAgICAgJHtzcDIoMywgJ2RlY01heEJpZCcsICdpbmNNYXhCaWQnKX0NCiAgICAgICAgICAgICR7c3AyKDUsICdkZWNNaW5CdXknLCAnaW5jTWluQnV5Jyl9DQogICAgICAgICAgICAke3NwMig2LCAnZGVjTWF4QnV5JywgJ2luY01heEJ1eScpfQ0KICAgICAgICAgICAgJHtidG4oJy5EZXRhaWxQYW5lbCA+IC5iaWRPcHRpb25zJywgJ3Jlc3VsdHMnLCAnZGVjQmlkJywgZmFsc2UpfQ0KICAgICAgICAgICAgJHtidG4oJy5EZXRhaWxQYW5lbCA+IC5iaWRPcHRpb25zJywgJ3Jlc3VsdHMnLCAnaW5jQmlkJywgdHJ1ZSl9DQogICAgICAgICAgICAudXQtbWFya2V0LXNlYXJjaC1maWx0ZXJzLXZpZXcgLmNhbGwtdG8tYWN0aW9uOmFmdGVyIHsgY29udGVudDogJ1sgJHtwLnNlYXJjaC5zZWFyY2h9XSd9DQogICAgICAgICAgICAudXQtbWFya2V0LXNlYXJjaC1maWx0ZXJzLXZpZXcgLnNlYXJjaC1wcmljZS1oZWFkZXI6Zmlyc3QtY2hpbGQgPiBidXR0b246YWZ0ZXIgeyBjb250ZW50OiAnWyAke3Auc2VhcmNoLnJlc2V0QmlkfV0nOyAgZm9udC1zaXplOiAxMHB4OyBkaXNwbGF5OiBibG9jayAgfQ0KICAgICAgICAgICAgLnV0LW5hdmlnYXRpb24tYnV0dG9uLWNvbnRyb2w6YWZ0ZXIgeyBmb250LXNpemU6MTBweDsgZmxvYXQ6cmlnaHQ7IG1hcmdpbi1yaWdodDoxMnB4OyBjb250ZW50OiAnWyAke3AuYmFja30gXScgfQ0KICAgICAgICAgICAgLnBhZ2luZ0NvbnRhaW5lciAucHJldjphZnRlciB7IGZvbnQtc2l6ZTogMTBweDsgZGlzcGxheTpibG9jazsgY29udGVudDogJ1sgJHtwLmxpc3RzLnByZXZ9IF0nIH0NCiAgICAgICAgICAgIC5wYWdpbmdDb250YWluZXIgLm5leHQ6YWZ0ZXIgeyBmb250LXNpemU6IDEwcHg7IGRpc3BsYXk6YmxvY2s7IGNvbnRlbnQ6ICdbICR7cC5saXN0cy5uZXh0fSBdJyB9DQogICAgICAgICAgICAuYmlkQnV0dG9uOmFmdGVyIHsgY29udGVudDogJyBbICR7cC5yZXN1bHRzLmJpZH0gXScgfQ0KICAgICAgICAgICAgLmJ1eUJ1dHRvbjpiZWZvcmUgeyBmbG9hdDpyaWdodDsgY29udGVudDogJyBbICR7cC5yZXN1bHRzLmJ1eX0gXScgfQ0KICAgICAgICAgICAgYDsNCg0KICAgICAgICB2YXIgc3R5bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzdHlsZSIpOw0KICAgICAgICBzdHlsZS50eXBlID0gInRleHQvY3NzIjsNCiAgICAgICAgc3R5bGUuaW5uZXJUZXh0ID0gY3NzOw0KICAgICAgICBkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKHN0eWxlKTsNCiAgICB9Ow0KDQogICAgZG9jdW1lbnQuYm9keS5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgZSA9PiB7DQogICAgICAgIGlmIChlLmNvZGUgPT0gcC5lbmFibGVEaXNhYmxlKSB7DQogICAgICAgICAgICBlbmFibGVkID0gIWVuYWJsZWQ7DQoNCiAgICAgICAgICAgIHNlcnZpY2VzLk5vdGlmaWNhdGlvbi5xdWV1ZShbYFBhbGVzbmlwZSAke2VuYWJsZWQgPyAiRW5hYmxlZCIgOiAiRGlzYWJsZWQifWAsIGVuYWJsZWQgPyBVSU5vdGlmaWNhdGlvblR5cGUuUE9TSVRJVkUgOiBVSU5vdGlmaWNhdGlvblR5cGUuTkVVVFJBTF0pOw0KICAgICAgICB9DQoNCiAgICAgICAgaWYgKCFlbmFibGVkKSB7DQogICAgICAgICAgICByZXR1cm47DQogICAgICAgIH0NCg0KICAgICAgICBsZXQgYWN0aW9uID0ga2V5cygpW2UuY29kZV07DQogICAgICAgIGlmIChhY3Rpb24pIGFjdGlvbigpOw0KICAgIH0pOw0KDQogICAgc2VydmljZXMuTm90aWZpY2F0aW9uLnF1ZXVlKFsiUGFsZXNuaXBlIEVuYWJsZWQiLCBVSU5vdGlmaWNhdGlvblR5cGUuUE9TSVRJVkVdKQ0KICAgIGFkZENzcygpOw0KfSkoLypCVVRUT05TKi8pOw=="