window.paletools = window.paletools || {};
window.paletools['palesnipe-2.0.1'] = "KGZ1bmN0aW9uIChidXR0b25zKSB7DQogICAgY29uc3QgVkVSU0lPTiA9ICJ2Mi4wLjEiOw0KDQogICAgYnV0dG9ucyA9ICQuZXh0ZW5kKHsNCiAgICAgICAgYmFjazogJ0RpZ2l0MScsDQogICAgICAgIGVuYWJsZURpc2FibGU6ICdDb21tYScsDQogICAgICAgIGxpc3RzOiB7DQogICAgICAgICAgICB1cDogJ0Fycm93VXAnLA0KICAgICAgICAgICAgZG93bjogJ0Fycm93RG93bicsDQogICAgICAgICAgICBwcmV2OiAnQXJyb3dMZWZ0JywNCiAgICAgICAgICAgIG5leHQ6ICdBcnJvd1JpZ2h0JywNCiAgICAgICAgfSwNCiAgICAgICAgc2VhcmNoOiB7DQogICAgICAgICAgICByZXNldEJpZDogJ0JhY2txdW90ZScsDQogICAgICAgICAgICBkZWNNaW5CaWQ6ICdBcnJvd0xlZnQnLA0KICAgICAgICAgICAgaW5jTWluQmlkOiAnQXJyb3dSaWdodCcsDQogICAgICAgICAgICBkZWNNYXhCaWQ6ICdFbmQnLA0KICAgICAgICAgICAgaW5jTWF4QmlkOiAnSG9tZScsDQogICAgICAgICAgICBkZWNNaW5CdXk6ICdEZWxldGUnLA0KICAgICAgICAgICAgaW5jTWluQnV5OiAnUGFnZURvd24nLA0KICAgICAgICAgICAgZGVjTWF4QnV5OiAnQXJyb3dEb3duJywNCiAgICAgICAgICAgIGluY01heEJ1eTogJ0Fycm93VXAnLA0KICAgICAgICAgICAgc2VhcmNoOiAnRGlnaXQyJw0KICAgICAgICB9LA0KICAgICAgICByZXN1bHRzOiB7DQogICAgICAgICAgICBiaWQ6ICdEaWdpdDQnLA0KICAgICAgICAgICAgYnV5OiAnRGlnaXQzJywNCiAgICAgICAgICAgIHRyYW5zZmVyOiAnS2V5UicsDQogICAgICAgICAgICBjbHViOiAnS2V5QycsDQogICAgICAgICAgICBwcmVzc0VudGVyOiB0cnVlLA0KICAgICAgICAgICAgYXV0b0J1eTogZmFsc2UsDQogICAgICAgICAgICBwcmV2ZW50QmFjazogZmFsc2UsDQogICAgICAgICAgICBzZWxsOiAnS2V5UScsDQogICAgICAgICAgICBkZWNCaWQ6ICdEZWxldGUnLA0KICAgICAgICAgICAgaW5jQmlkOiAnUGFnZURvd24nDQogICAgICAgIH0NCiAgICB9LCBidXR0b25zIHx8IHt9KTsNCiAgICBsZXQgcCA9IGJ1dHRvbnM7DQogICAgbGV0IGVuYWJsZWQgPSB0cnVlOw0KICAgIGxldCBiYWNrQnV0dG9uTGFzdERhdGUgPSBuZXcgRGF0ZSgpOw0KICAgIGxldCBiYWNrQnV0dG9uUHJlc3NlZE9uUmVzdWx0ID0gZmFsc2U7DQoNCiAgICAvLyByZXNldCBjb25zb2xlDQogICAgdmFyIGlmcmFtZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lmcmFtZScpOw0KICAgIGlmcmFtZS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOw0KICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoaWZyYW1lKTsNCiAgICB3aW5kb3cuY29uc29sZSA9IGlmcmFtZS5jb250ZW50V2luZG93LmNvbnNvbGU7DQoNCiAgICB3aW5kb3cuTUFYX05FV19JVEVNUyA9IE51bWJlci5NQVhfVkFMVUU7DQoNCiAgICBVVEl0ZW1Eb21haW5SZXBvc2l0b3J5LnByb3RvdHlwZS5pc1BpbGVGdWxsID0gZnVuY3Rpb24oZSkgew0KICAgICAgICB2YXIgdCA9IDANCiAgICAgICAgICAsIGkgPSB0aGlzLnBpbGVTaXplcy5nZXQoZSk7DQogICAgICAgIHN3aXRjaCAoZSkgew0KICAgICAgICBjYXNlIEl0ZW1QaWxlLlBVUkNIQVNFRDoNCiAgICAgICAgICAgIHQgPSB0aGlzLnVuYXNzaWduZWQubGVuZ3RoOw0KICAgICAgICAgICAgYnJlYWs7DQogICAgICAgIGNhc2UgSXRlbVBpbGUuVFJBTlNGRVI6DQogICAgICAgICAgICB0ID0gdGhpcy50cmFuc2Zlci5sZW5ndGg7DQogICAgICAgICAgICBicmVhazsNCiAgICAgICAgY2FzZSBJdGVtUGlsZS5JTkJPWDoNCiAgICAgICAgICAgIHJldHVybiAwOw0KICAgICAgICBjYXNlIEl0ZW1QaWxlLkNMVUI6DQogICAgICAgICAgICByZXR1cm4gITENCiAgICAgICAgfQ0KICAgICAgICByZXR1cm4gKGkgfHwgMCkgPD0gdA0KICAgIH0NCg0KICAgIGNvbnN0DQogICAgICAgIGwgPSBjb25zb2xlLmxvZywNCiAgICAgICAgbG9jID0gd2luZG93LnNlcnZpY2VzLkxvY2FsaXphdGlvbiwNCiAgICAgICAgQkFDS19CVVRUT05fVEhSRVNIT0xEID0gNTAwLA0KICAgICAgICBkaXNwYXRjaE1vdXNlRXZlbnQgPSAoJHRhcmdldCwgZXZlbnROYW1lKSA9PiB7DQogICAgICAgICAgICBpZiAoJHRhcmdldC5sZW5ndGggPT0gMCkgcmV0dXJuIGZhbHNlOw0KICAgICAgICAgICAgY29uc3QgbW91c2VFdmVudCA9IGRvY3VtZW50LmNyZWF0ZUV2ZW50KCdNb3VzZUV2ZW50cycpOw0KICAgICAgICAgICAgbW91c2VFdmVudC5pbml0RXZlbnQoZXZlbnROYW1lKTsNCiAgICAgICAgICAgICR0YXJnZXRbMF0uZGlzcGF0Y2hFdmVudChtb3VzZUV2ZW50KTsNCiAgICAgICAgICAgIHJldHVybiB0cnVlOw0KICAgICAgICB9LA0KICAgICAgICBtb3VzZURvd24gPSB0YXJnZXQgPT4gZGlzcGF0Y2hNb3VzZUV2ZW50KHRhcmdldCwgJ21vdXNlZG93bicpLA0KICAgICAgICBtb3VzZVVwID0gdGFyZ2V0ID0+IGRpc3BhdGNoTW91c2VFdmVudCh0YXJnZXQsICdtb3VzZXVwJyksDQogICAgICAgIG1vdXNlQ2xpY2sgPSAodGFyZ2V0LCBkZWxheSwgY2FsbGJhY2spID0+IHsNCiAgICAgICAgICAgIGlmIChkZWxheSkgew0KICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gew0KICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayhtb3VzZUNsaWNrKHRhcmdldCkpOw0KICAgICAgICAgICAgICAgIH0sIGRlbGF5KTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgIHJldHVybiBtb3VzZURvd24odGFyZ2V0KSAmJiBtb3VzZVVwKHRhcmdldCk7DQogICAgICAgICAgICB9DQogICAgICAgIH0sDQogICAgICAgIGJ1eU5vdyA9IChjYWxsYmFjaykgPT4gew0KICAgICAgICAgICAgaWYgKG1vdXNlQ2xpY2soYnV5QnRuKCkpKSB7DQogICAgICAgICAgICAgICAgaWYgKHAucmVzdWx0cy5wcmVzc0VudGVyKSB7DQogICAgICAgICAgICAgICAgICAgIHRyeVByZXNzT2tCdG4oY2FsbGJhY2spOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgfSwNCiAgICAgICAgdHJ5UHJlc3NPa0J0biA9IChjYWxsYmFjaykgPT4gew0KICAgICAgICAgICAgaWYgKCFtb3VzZUNsaWNrKGVudGVyQnRuKCkpKSB7DQogICAgICAgICAgICAgICAgaWYgKGNhbGxiYWNrKSB7DQogICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoY2FsbGJhY2soZmFsc2UpLCAwKTsNCiAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KHRyeVByZXNzT2tCdG4sIDEwKTsNCiAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICB9DQogICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICBpZiAoY2FsbGJhY2spIHsNCiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2sodHJ1ZSk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIHVwZGF0ZUJvdWdodFVJKCk7DQogICAgICAgICAgICB9DQogICAgICAgIH0sDQogICAgICAgIGJhY2sgPSAoKSA9PiB7DQogICAgICAgICAgICBsKCdiYWNrJyk7DQogICAgICAgICAgICAvLyBmb3JjZSBkb3VibGUgYmFjayB3aGVuIHRoZXJlIGlzIGEgY2FyZCBvbiB0aGUgbGlzdA0KICAgICAgICAgICAgLy8gaWYgKG5ldyBEYXRlKCkgLSBiYWNrQnV0dG9uTGFzdERhdGUgPCBCQUNLX0JVVFRPTl9USFJFU0hPTEQpIHsNCiAgICAgICAgICAgIC8vICAgICByZXR1cm47DQogICAgICAgICAgICAvLyB9DQogICAgICAgICAgICAvLyBiYWNrQnV0dG9uTGFzdERhdGUgPSBuZXcgRGF0ZSgpOw0KICAgICAgICAgICAgaWYgKCFtb3VzZUNsaWNrKGJhY2tCdG4oKSkpIHsNCiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGJhY2ssIDEpOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9LA0KDQogICAgICAgIHNlYXJjaCA9ICgpID0+IHsNCiAgICAgICAgICAgIG1vdXNlQ2xpY2soc2VhcmNoQnRuKCkpOw0KICAgICAgICAgICAgaWYgKHAucmVzdWx0cy5hdXRvQnV5KSB7DQogICAgICAgICAgICAgICAgaWYgKHNlYXJjaFJlc3VsdHMoKSA9PSAwKSB7DQogICAgICAgICAgICAgICAgICAgIGwoJ3Jlc2VhcmNoaW5nJyk7DQogICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoc2VhcmNoLCAxMCk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICBsKCQoIi51dC1uby1yZXN1bHRzLXZpZXciKS5sZW5ndGgpOw0KICAgICAgICAgICAgICAgICAgICBpZiAoJCgiLnV0LW5vLXJlc3VsdHMtdmlldyIpLmxlbmd0aCA+IDApIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGwoJ25vIHJlc3VsdHMnKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGJhY2soKTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGwoJ2J1eWluZycpOw0KICAgICAgICAgICAgICAgICAgICAgICAgYnV5Tm93KChib3VnaHQpID0+IHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoYm91Z2h0KSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdXNlQ2xpY2sodHJhbnNmZXJCdG4oKSk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgIH0sDQoNCiAgICAgICAgdHJhbnNmZXJCdG4gPSAoKSA9PiAkKGAudXQtYnV0dG9uLWdyb3VwID4gYnV0dG9uOmNvbnRhaW5zKCcke2xvYy5sb2NhbGl6ZSgnaW5mb3BhbmVsLmxhYmVsLnNlbmRUcmFkZVBpbGUnKX0nKWApLA0KICAgICAgICBjbHViQnRuID0gKCkgPT4gJChgLnV0LWJ1dHRvbi1ncm91cCA+IGJ1dHRvbjpjb250YWlucygnJHtsb2MubG9jYWxpemUoJ2luZm9wYW5lbC5sYWJlbC5zdG9yZUluQ2x1YicpfScpYCksDQogICAgICAgIHNlbGxCdG4gPSAoKSA9PiAkKGAudXQtYnV0dG9uLWdyb3VwID4gYnV0dG9uOmNvbnRhaW5zKCcke2xvYy5sb2NhbGl6ZSgnaW5mb3BhbmVsLmxhYmVsLmRpc2NhcmQnKX0nKWApLA0KICAgICAgICBidXlCdG4gPSAoKSA9PiAkKCcuYnV5QnV0dG9uJyksDQogICAgICAgIGJhY2tCdG4gPSAoKSA9PiAkKCcudXQtbmF2aWdhdGlvbi1idXR0b24tY29udHJvbCcpLA0KICAgICAgICBlbnRlckJ0biA9ICgpID0+ICQoJy5lYS1kaWFsb2ctdmlldyAudXQtYnV0dG9uLWdyb3VwIGJ1dHRvbjplcSgwKScpLA0KICAgICAgICBzZWFyY2hCdG4gPSAoKSA9PiAkKCcuYnV0dG9uLWNvbnRhaW5lciAuYnRuLXN0YW5kYXJkLmNhbGwtdG8tYWN0aW9uJyksDQogICAgICAgIHNlYXJjaFJlc3VsdHMgPSAoKSA9PiAkKCcuU2VhcmNoUmVzdWx0cycpLmxlbmd0aCwNCg0KICAgICAgICBrZXlzID0gKCkgPT4gew0KICAgICAgICAgICAgbGV0IGIgPSB7fTsNCg0KICAgICAgICAgICAgYltwLmJhY2tdID0gKCkgPT4gYmFjaygpOw0KDQogICAgICAgICAgICBpZiAoJCgnLnV0LW1hcmtldC1zZWFyY2gtZmlsdGVycy12aWV3JykubGVuZ3RoID4gMCkgew0KICAgICAgICAgICAgICAgIGJbcC5zZWFyY2guZGVjTWluQmlkXSA9ICgpID0+IG1vdXNlQ2xpY2soJCgnLmRlY3JlbWVudC12YWx1ZScpKTsNCiAgICAgICAgICAgICAgICBiW3Auc2VhcmNoLmluY01pbkJpZF0gPSAoKSA9PiBtb3VzZUNsaWNrKCQoJy5pbmNyZW1lbnQtdmFsdWUnKSk7DQogICAgICAgICAgICAgICAgYltwLnNlYXJjaC5kZWNNYXhCaWRdID0gKCkgPT4gbW91c2VDbGljaygkKCcuZGVjcmVtZW50LXZhbHVlOmVxKDEpJykpOw0KICAgICAgICAgICAgICAgIGJbcC5zZWFyY2guaW5jTWF4QmlkXSA9ICgpID0+IG1vdXNlQ2xpY2soJCgnLmluY3JlbWVudC12YWx1ZTplcSgxKScpKTsNCiAgICAgICAgICAgICAgICBiW3Auc2VhcmNoLmRlY01pbkJ1eV0gPSAoKSA9PiBtb3VzZUNsaWNrKCQoJy5kZWNyZW1lbnQtdmFsdWU6ZXEoMiknKSk7DQogICAgICAgICAgICAgICAgYltwLnNlYXJjaC5pbmNNaW5CdXldID0gKCkgPT4gbW91c2VDbGljaygkKCcuaW5jcmVtZW50LXZhbHVlOmVxKDIpJykpOw0KICAgICAgICAgICAgICAgIGJbcC5zZWFyY2guZGVjTWF4QnV5XSA9ICgpID0+IG1vdXNlQ2xpY2soJCgnLmRlY3JlbWVudC12YWx1ZTplcSgzKScpKTsNCiAgICAgICAgICAgICAgICBiW3Auc2VhcmNoLmluY01heEJ1eV0gPSAoKSA9PiBtb3VzZUNsaWNrKCQoJy5pbmNyZW1lbnQtdmFsdWU6ZXEoMyknKSk7DQogICAgICAgICAgICAgICAgYltwLnNlYXJjaC5zZWFyY2hdID0gKCkgPT4gc2VhcmNoKCk7DQogICAgICAgICAgICAgICAgYltwLnNlYXJjaC5yZXNldEJpZF0gPSAoKSA9PiBtb3VzZUNsaWNrKCQoJy5zZWFyY2gtcHJpY2UtaGVhZGVyID4gYnV0dG9uOmZpcnN0JykpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgbGV0IGl0ZW1zID0gJCgiLmxpc3RGVVRJdGVtIik7DQogICAgICAgICAgICAgICAgbGV0IGl0ZW1zRXhpc3RzID0gaXRlbXMubGVuZ3RoID4gMDsNCiAgICAgICAgICAgICAgICBsZXQgaXRlbXNDb250YWluZXIgPSBpdGVtcy5wYXJlbnRzKCcucGFnaW5hdGVkLCAudXQtd2F0Y2gtbGlzdC12aWV3LCAudXQtdHJhbnNmZXItbGlzdC12aWV3Jyk7DQogICAgICAgICAgICAgICAgaWYgKGl0ZW1zQ29udGFpbmVyLmxlbmd0aCA9PSAwKSB7DQogICAgICAgICAgICAgICAgICAgIGl0ZW1zQ29udGFpbmVyID0gaXRlbXMucGFyZW50KCk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGlmIChpdGVtc0V4aXN0cyAmJiAkKCcuRGV0YWlsUGFuZWwgPiAuYmlkT3B0aW9ucycpLmxlbmd0aCA+IDApIHsNCiAgICAgICAgICAgICAgICAgICAgYltwLnJlc3VsdHMuYmlkXSA9ICgpID0+IG1vdXNlQ2xpY2soJCgnLmJpZEJ1dHRvbicpKTsNCiAgICAgICAgICAgICAgICAgICAgYltwLnJlc3VsdHMuYnV5XSA9ICgpID0+IGJ1eU5vdygpOw0KICAgICAgICAgICAgICAgICAgICBiW3AucmVzdWx0cy5kZWNCaWRdID0gKCkgPT4gbW91c2VDbGljaygkKCcuYmlkT3B0aW9ucyAuZGVjcmVtZW50LXZhbHVlJykpOw0KICAgICAgICAgICAgICAgICAgICBiW3AucmVzdWx0cy5pbmNCaWRdID0gKCkgPT4gbW91c2VDbGljaygkKCcuYmlkT3B0aW9ucyAuaW5jcmVtZW50LXZhbHVlJykpOw0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgIGlmIChpdGVtc0V4aXN0cyAmJiAkKCcuRGV0YWlsUGFuZWwgPiAudXQtYnV0dG9uLWdyb3VwJykubGVuZ3RoID4gMCkgew0KICAgICAgICAgICAgICAgICAgICBiW3AucmVzdWx0cy50cmFuc2Zlcl0gPSAoKSA9PiBtb3VzZUNsaWNrKHRyYW5zZmVyQnRuKCkpOw0KICAgICAgICAgICAgICAgICAgICBiW3AucmVzdWx0cy5jbHViXSA9ICgpID0+IG1vdXNlQ2xpY2soY2x1YkJ0bigpKTsNCiAgICAgICAgICAgICAgICAgICAgYltwLnJlc3VsdHMuc2VsbF0gPSAoKSA9PiBtb3VzZUNsaWNrKHNlbGxCdG4oKSk7DQogICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgaWYgKGl0ZW1zRXhpc3RzKSB7DQogICAgICAgICAgICAgICAgICAgIGJbcC5saXN0cy51cF0gPSAoKSA9PiB7DQogICAgICAgICAgICAgICAgICAgICAgICBsZXQgY29udGFpbmVyID0gaXRlbXNDb250YWluZXI7DQogICAgICAgICAgICAgICAgICAgICAgICBsZXQgc2VsZWN0ZWQgPSAkKCcubGlzdEZVVEl0ZW0uc2VsZWN0ZWQnLCBjb250YWluZXIpLnByZXYoKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzZWxlY3RlZC5sZW5ndGggPT09IDApIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZCA9ICQoIi5saXN0RlVUSXRlbTpsYXN0LWNoaWxkIiwgY29udGFpbmVyKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIG1vdXNlQ2xpY2soc2VsZWN0ZWQpOw0KICAgICAgICAgICAgICAgICAgICAgICAgY29udGFpbmVyLmNzcygncG9zaXRpb24nLCAncmVsYXRpdmUnKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRhaW5lci5zY3JvbGxUb3AoY29udGFpbmVyLnNjcm9sbFRvcCgpICsgc2VsZWN0ZWQucG9zaXRpb24oKS50b3AgLSBzZWxlY3RlZC5oZWlnaHQoKSk7DQogICAgICAgICAgICAgICAgICAgIH07DQogICAgICAgICAgICAgICAgICAgIGJbcC5saXN0cy5kb3duXSA9ICgpID0+IHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBjb250YWluZXIgPSBpdGVtc0NvbnRhaW5lcjsNCiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBzZWxlY3RlZCA9ICQoJy5saXN0RlVUSXRlbS5zZWxlY3RlZCcsIGNvbnRhaW5lcikubmV4dCgpOw0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNlbGVjdGVkLmxlbmd0aCA9PT0gMCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkID0gJCgiLmxpc3RGVVRJdGVtOmZpcnN0LWNoaWxkIiwgY29udGFpbmVyKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIG1vdXNlQ2xpY2soc2VsZWN0ZWQpOw0KICAgICAgICAgICAgICAgICAgICAgICAgY29udGFpbmVyLmNzcygncG9zaXRpb24nLCAncmVsYXRpdmUnKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRhaW5lci5zY3JvbGxUb3AoY29udGFpbmVyLnNjcm9sbFRvcCgpICsgc2VsZWN0ZWQucG9zaXRpb24oKS50b3ApOw0KICAgICAgICAgICAgICAgICAgICB9Ow0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgIGlmICgkKCcucGFnaW5nQ29udGFpbmVyJykubGVuZ3RoID4gMCkgew0KICAgICAgICAgICAgICAgICAgICBiW3AubGlzdHMucHJldl0gPSAoKSA9PiBtb3VzZUNsaWNrKCQoJy5wYWdpbmdDb250YWluZXIgLnByZXY6dmlzaWJsZScpKTsNCiAgICAgICAgICAgICAgICAgICAgYltwLmxpc3RzLm5leHRdID0gKCkgPT4gbW91c2VDbGljaygkKCcucGFnaW5nQ29udGFpbmVyIC5uZXh0OnZpc2libGUnKSk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICByZXR1cm4gYjsNCiAgICAgICAgfTsNCg0KICAgIC8vIFVJIHVwZGF0ZSBhZnRlciBidXkgbm93DQogICAgdXBkYXRlQm91Z2h0VUkgPSAoKSA9PiB7DQogICAgICAgIHZhciB0eEJ0biA9IHRyYW5zZmVyQnRuKCk7DQogICAgICAgIGlmICh0eEJ0bi5sZW5ndGggPT0gMCkgew0KICAgICAgICAgICAgc2V0VGltZW91dCh1cGRhdGVCb3VnaHRVSSwgNTApOw0KICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICB9DQoNCiAgICAgICAgbGV0IHVwZCA9ICh0LCB0eCkgPT4gew0KICAgICAgICAgICAgaWYgKCF0KSByZXR1cm47DQogICAgICAgICAgICBsZXQgYWRkID0gYCBbICR7cC5yZXN1bHRzW3R4XX0gXWA7DQogICAgICAgICAgICBsZXQgaHRtbCA9IHQuaHRtbCgpOw0KICAgICAgICAgICAgaWYgKGh0bWwgJiYgaHRtbC5pbmRleE9mKGFkZCkgPT0gLTEpIHsNCiAgICAgICAgICAgICAgICB0Lmh0bWwodC5odG1sKCkgKyBhZGQpOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQoNCiAgICAgICAgdXBkKHR4QnRuLCAndHJhbnNmZXInKTsNCiAgICAgICAgdXBkKGNsdWJCdG4oKSwgJ2NsdWInKTsNCiAgICAgICAgdXBkKHNlbGxCdG4oKSwgJ3NlbGwnKTsNCiAgICB9Ow0KDQogICAgYWRkQ3NzID0gKCkgPT4gew0KICAgICAgICBsZXQgYnRuID0gKHEsIGsxLCBrMiwgaW5jKSA9PiBgJHtxfSAuJHsoaW5jID8gJ2luJyA6ICdkZScpfWNyZW1lbnQtdmFsdWU6YWZ0ZXIgeyBmb250LXNpemU6MTBweDsgZGlzcGxheTpibG9jazsgbWFyZ2luLXRvcDotMzBweDsgY29udGVudDogJ1sgJHtwW2sxXVtrMl19IF0nIH1gOw0KICAgICAgICBsZXQgc3AxID0gKGksIGssIGluYykgPT4gYnRuKGAuc2VhcmNoLXByaWNlcyAucHJpY2UtZmlsdGVyOm50aC1jaGlsZCgke2l9KWAsICdzZWFyY2gnLCBrLCBpbmMpOw0KICAgICAgICBsZXQgc3AyID0gKGksIGsxLCBrMikgPT4gYCR7c3AxKGksIGsxKX0ke3NwMShpLCBrMiwgdHJ1ZSl9YDsNCiAgICAgICAgbGV0IGNzcyA9IGANCiAgICAgICAgICAgICR7c3AyKDIsICdkZWNNaW5CaWQnLCAnaW5jTWluQmlkJyl9DQogICAgICAgICAgICAke3NwMigzLCAnZGVjTWF4QmlkJywgJ2luY01heEJpZCcpfQ0KICAgICAgICAgICAgJHtzcDIoNSwgJ2RlY01pbkJ1eScsICdpbmNNaW5CdXknKX0NCiAgICAgICAgICAgICR7c3AyKDYsICdkZWNNYXhCdXknLCAnaW5jTWF4QnV5Jyl9DQogICAgICAgICAgICAke2J0bignLkRldGFpbFBhbmVsID4gLmJpZE9wdGlvbnMnLCAncmVzdWx0cycsICdkZWNCaWQnLCBmYWxzZSl9DQogICAgICAgICAgICAke2J0bignLkRldGFpbFBhbmVsID4gLmJpZE9wdGlvbnMnLCAncmVzdWx0cycsICdpbmNCaWQnLCB0cnVlKX0NCiAgICAgICAgICAgIC51dC1tYXJrZXQtc2VhcmNoLWZpbHRlcnMtdmlldyAuY2FsbC10by1hY3Rpb246YWZ0ZXIgeyBjb250ZW50OiAnWyAke3Auc2VhcmNoLnNlYXJjaH1dJ30NCiAgICAgICAgICAgIC51dC1tYXJrZXQtc2VhcmNoLWZpbHRlcnMtdmlldyAuc2VhcmNoLXByaWNlLWhlYWRlcjpmaXJzdC1jaGlsZCA+IGJ1dHRvbjphZnRlciB7IGNvbnRlbnQ6ICdbICR7cC5zZWFyY2gucmVzZXRCaWR9XSc7ICBmb250LXNpemU6IDEwcHg7IGRpc3BsYXk6IGJsb2NrICB9DQogICAgICAgICAgICAudXQtbmF2aWdhdGlvbi1idXR0b24tY29udHJvbDphZnRlciB7IGZvbnQtc2l6ZToxMHB4OyBmbG9hdDpyaWdodDsgbWFyZ2luLXJpZ2h0OjEycHg7IGNvbnRlbnQ6ICdbICR7cC5iYWNrfSBdJyB9DQogICAgICAgICAgICAucGFnaW5nQ29udGFpbmVyIC5wcmV2OmFmdGVyIHsgZm9udC1zaXplOiAxMHB4OyBkaXNwbGF5OmJsb2NrOyBjb250ZW50OiAnWyAke3AubGlzdHMucHJldn0gXScgfQ0KICAgICAgICAgICAgLnBhZ2luZ0NvbnRhaW5lciAubmV4dDphZnRlciB7IGZvbnQtc2l6ZTogMTBweDsgZGlzcGxheTpibG9jazsgY29udGVudDogJ1sgJHtwLmxpc3RzLm5leHR9IF0nIH0NCiAgICAgICAgICAgIC5iaWRCdXR0b246YWZ0ZXIgeyBjb250ZW50OiAnIFsgJHtwLnJlc3VsdHMuYmlkfSBdJyB9DQogICAgICAgICAgICAuYnV5QnV0dG9uOmJlZm9yZSB7IGZsb2F0OnJpZ2h0OyBjb250ZW50OiAnIFsgJHtwLnJlc3VsdHMuYnV5fSBdJyB9DQogICAgICAgICAgICBgOw0KDQogICAgICAgIHZhciBzdHlsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInN0eWxlIik7DQogICAgICAgIHN0eWxlLnR5cGUgPSAidGV4dC9jc3MiOw0KICAgICAgICBzdHlsZS5pbm5lclRleHQgPSBjc3M7DQogICAgICAgIGRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQoc3R5bGUpOw0KICAgIH07DQoNCiAgICBkb2N1bWVudC5ib2R5LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBlID0+IHsNCiAgICAgICAgaWYgKGUuY29kZSA9PSBwLmVuYWJsZURpc2FibGUpIHsNCiAgICAgICAgICAgIGVuYWJsZWQgPSAhZW5hYmxlZDsNCg0KICAgICAgICAgICAgc2VydmljZXMuTm90aWZpY2F0aW9uLnF1ZXVlKFtgUGFsZXNuaXBlICR7ZW5hYmxlZCA/ICJFbmFibGVkIiA6ICJEaXNhYmxlZCJ9YCwgZW5hYmxlZCA/IFVJTm90aWZpY2F0aW9uVHlwZS5QT1NJVElWRSA6IFVJTm90aWZpY2F0aW9uVHlwZS5ORVVUUkFMXSk7DQogICAgICAgIH0NCg0KICAgICAgICBpZiAoIWVuYWJsZWQpIHsNCiAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgfQ0KDQogICAgICAgIGxldCBhY3Rpb24gPSBrZXlzKClbZS5jb2RlXTsNCiAgICAgICAgaWYgKGFjdGlvbikgYWN0aW9uKCk7DQogICAgfSk7DQoNCiAgICBzZXJ2aWNlcy5Ob3RpZmljYXRpb24ucXVldWUoWyJQYWxlc25pcGUgRW5hYmxlZCIsIFVJTm90aWZpY2F0aW9uVHlwZS5QT1NJVElWRV0pDQogICAgYWRkQ3NzKCk7DQp9KSgvKkJVVFRPTlMqLyk7"